<th:block th:with="title='Админ — Автопарк', active='admin'"
          th:replace="~{_fragments/layout :: layout(${title}, ${active}, ~{::content})}">
    <th:block th:fragment="content">

        <div class="page-head">
            <h2>Автопарк</h2>
            <a class="btn" th:href="@{/admin/cars/new}">+ Добавить</a>
        </div>

        <p class="alert alert--ok" th:if="${param.created}">Автомобиль добавлен</p>
        <p class="alert alert--ok" th:if="${param.updated}">Изменения сохранены</p>
        <p class="alert alert--ok" th:if="${param.deleted}">Автомобиль удалён</p>

        <div class="card" th:if="${#lists.size(cars)>0}">
            <table class="table">
                <thead>
                <tr>
                    <th>ID</th><th>Марка</th><th>Модель</th><th>Класс</th><th>Коробка</th>
                    <th>Год</th><th>Цена</th><th>Статус</th><th></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="c : ${cars}">
                    <td th:text="${c.id}">1</td>
                    <td th:text="${c.make}">Make</td>
                    <td th:text="${c.model}">Model</td>
                    <td th:text="${c.vehicleClass}">economy</td>
                    <td th:text="${c.transmission}">AT</td>
                    <td th:text="${c.year}">2024</td>
                    <td th:text="${#numbers.formatDecimal(c.dailyPrice,0,'COMMA',0,'POINT')} + ' ₽'">0 ₽</td>
                    <td><span class="badge" th:text="${c.available} ? 'Доступен' : 'Недоступен'"
                              th:classappend="${c.available} ? ' badge--ok' : ' badge--warn'">Статус</span></td>
                    <td style="white-space:nowrap">
                        <a class="btn btn--light" th:href="@{|/admin/cars/${c.id}/edit|}">Изм.</a>
                        <form th:action="@{|/admin/cars/${c.id}/delete|}" method="post" style="display:inline">
                            <button class="btn btn--danger" onclick="return confirm('Удалить авто?')">Удалить</button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <p th:if="${#lists.isEmpty(cars)}" class="muted">Пока нет автомобилей.</p>

    </th:block>
</th:block>
