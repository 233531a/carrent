<th:block th:with="title=${titleForm} ?: 'Автомобиль', active='admin'"
          th:replace="~{_fragments/layout :: layout(${title}, ${active}, ~{::content})}">
    <th:block th:fragment="content">

        <div class="page-head" style="display:flex; justify-content:space-between; align-items:center;">
            <h2 class="mt-0" th:text="${titleForm}">Автомобиль</h2>
            <a class="btn btn--light" th:href="@{/admin/cars}">← Назад</a>
        </div>

        <form class="card form" th:object="${car}"
              th:action="${car.id} != null ? @{|/admin/cars/${car.id}|} : @{/admin/cars}"
              method="post">

            <div class="form__grid">
                <!-- Марка -->
                <div>
                    <label>Марка</label>
                    <input th:field="*{make}" required>
                    <small class="text-muted" th:if="${#fields.hasErrors('make')}" th:errors="*{make}"></small>
                </div>

                <!-- Модель -->
                <div>
                    <label>Модель</label>
                    <input th:field="*{model}" required>
                    <small class="text-muted" th:if="${#fields.hasErrors('model')}" th:errors="*{model}"></small>
                </div>

                <!-- Класс (строка) -->
                <div>
                    <label>Класс</label>
                    <select th:field="*{vehicleClass}" required>
                        <option th:value="'Эконом'">Эконом</option>
                        <option th:value="'Комфорт'">Комфорт</option>
                        <option th:value="'Бизнес'">Бизнес</option>
                        <option th:value="'Паркетник'">Паркетник</option>
                        <option th:value="'Внедорожник'">Внедорожник</option>
                        <option th:value="'Премиум'">Премиум</option>
                    </select>
                </div>

                <!-- КПП (AT/MT) -->
                <div>
                    <label>КПП</label>
                    <select th:field="*{transmission}" required>
                        <option value="AT">AT</option>
                        <option value="MT">MT</option>
                    </select>
                </div>

                <!-- Год -->
                <div>
                    <label>Год</label>
                    <input type="number" th:field="*{year}" min="1980" max="2100" required>
                </div>

                <!-- Цена -->
                <div>
                    <label>Цена, ₽/день</label>
                    <input type="number" th:field="*{dailyPrice}" min="1" step="1" required>
                </div>

                <!-- Доступность -->
                <div style="align-self:end;">
                    <label style="display:flex; gap:8px; align-items:center;">
                        <input type="checkbox" th:field="*{available}"> Доступен
                    </label>
                </div>

                <!-- Каталог (enum/строка) -->
                <div>
                    <label>Каталог</label>
                    <select th:field="*{catalog}" required>
                        <option value="REGULAR">Обычный</option>
                        <option value="TAXI">Такси</option>
                        <option value="DELIVER">Доставка</option>
                    </select>
                </div>

                <!-- Фото (URL) -->
                <div>
                    <label>Фото (URL)</label>
                    <input th:field="*{photoUrl}" placeholder="/images/camry.png">
                    <small class="text-muted">Положите файл в <code>static/images</code> и укажите путь вида <code>/images/имяфайла.png</code>.</small>
                </div>
            </div>

            <div class="form__actions">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button class="btn" type="submit">Сохранить</button>
                <a class="btn btn--light" th:href="@{/admin/cars}">Отмена</a>
            </div>
        </form>

    </th:block>
</th:block>
