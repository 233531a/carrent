<th:block th:with="title='Личный кабинет', active='account'"
          th:replace="~{_fragments/layout :: layout(${title}, ${active}, ~{::content})}">
    <th:block th:fragment="content">

        <h2 class="page-title">Личный кабинет</h2>

        <div class="card" th:if="${customer != null}">
            <h3>Мои данные</h3>
            <p><b>Имя:</b> <span th:text="${customer.fullName}">—</span></p>
            <p><b>Email:</b> <span th:text="${customer.email}">—</span></p>
            <p><b>Телефон:</b> <span th:text="${customer.phone}">—</span></p>
        </div>

        <div class="card">
            <h3>Бронирования</h3>
            <div class="table-wrap">
                <table class="table">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Авто</th>
                        <th>Даты</th>
                        <th>Статус</th>
                        <th>Сумма</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="r : ${rentals}">
                        <td th:text="${r.id}">1</td>
                        <td th:text="${r.car.make + ' ' + r.car.model}">—</td>
                        <td th:text="${#temporals.format(r.startDate, 'dd.MM.yyyy')} + ' — ' + ${#temporals.format(r.endDate, 'dd.MM.yyyy')}">—</td>
                        <td><span class="chip" th:text="${r.status}">PENDING</span></td>
                        <td th:text="${#numbers.formatDecimal(r.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' ₽'">0 ₽</td>
                        <td>
                            <form th:action="@{|/account/rentals/${r.id}/cancel|}" method="post"
                                  th:if="${r.status.name() == 'PENDING' or r.status.name() == 'ACTIVE'}">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                                <button class="btn btn--danger btn--sm" type="submit">Отменить</button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </th:block>
</th:block>
