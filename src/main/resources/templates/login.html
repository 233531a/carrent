<th:block th:with="title='–í—Ö–æ–¥', active='login'"
          th:replace="~{_fragments/layout :: layout(${title}, ${active}, ~{::content})}">
    <th:block th:fragment="content">
        <div class="auth-container">
            <div class="auth-wrapper">
                <!-- Left side - Visual/Branding -->
                <div class="auth-visual-panel">
                    <div class="auth-visual-content">
                        <div class="auth-logo-large">
                            <div class="logo-icon">üöó</div>
                            <h1 class="logo-text">Rentify</h1>
                        </div>
                        <div class="auth-visual-text">
                            <h2 class="visual-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ!</h2>
                            <p class="visual-description">–í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∞—Ä–µ–Ω–¥—É –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</p>
                        </div>
                        <div class="auth-features">
                            <div class="feature-item">
                                <span class="feature-icon">‚úì</span>
                                <span>–ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">‚úì</span>
                                <span>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">‚úì</span>
                                <span>24/7 –ø–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                            </div>
                        </div>
                    </div>
                    <div class="auth-visual-bg">
                        <div class="bg-shape bg-shape-1"></div>
                        <div class="bg-shape bg-shape-2"></div>
                        <div class="bg-shape bg-shape-3"></div>
                    </div>
                </div>

                <!-- Right side - Form -->
                <div class="auth-form-panel">
                    <div class="auth-form-card">
                        <div class="form-header">
                            <h2 class="form-title">–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
                            <p class="form-subtitle">–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞</p>
                        </div>

                        <!-- Alerts -->
                        <div class="alert alert-error" th:if="${param.error}">
                            <span class="alert-icon">‚ö†Ô∏è</span>
                            <span>–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</span>
                        </div>

                        <div class="alert alert-success" th:if="${param.logout}">
                            <span class="alert-icon">‚úì</span>
                            <span>–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞.</span>
                        </div>

                        <div class="alert alert-success" th:if="${param.registered}">
                            <span class="alert-icon">‚úì</span>
                            <span>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É, –∏—Å–ø–æ–ª—å–∑—É—è —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ.</span>
                        </div>

                        <div class="alert alert-error" th:if="${error}" th:text="${error}"></div>

                        <form th:action="@{/login}" method="post" class="auth-form" id="loginForm">
                            <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}" />

                            <div class="form-group">
                                <label for="username" class="form-label">
                                    <span class="label-icon">üë§</span>
                                    <span>–õ–æ–≥–∏–Ω</span>
                                </label>
                                <div class="input-wrapper">
                                    <input 
                                        type="text" 
                                        id="username" 
                                        name="username" 
                                        class="form-input"
                                        placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω" 
                                        required 
                                        autofocus 
                                        minlength="3" 
                                        maxlength="100" />
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="password" class="form-label">
                                    <span class="label-icon">üîí</span>
                                    <span>–ü–∞—Ä–æ–ª—å</span>
                                </label>
                                <div class="input-wrapper input-wrapper-password">
                                    <input 
                                        type="password" 
                                        id="password" 
                                        name="password" 
                                        class="form-input"
                                        placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å" 
                                        required />
                                    <button 
                                        type="button" 
                                        class="password-toggle" 
                                        data-visible="false"
                                        onclick="togglePassword('password', this)" 
                                        aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">
                                        <svg class="icon-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                            <circle cx="12" cy="12" r="3"></circle>
                                        </svg>
                                        <svg class="icon-eye-off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                            <line x1="1" y1="1" x2="23" y2="23"></line>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <div class="form-options">
                                <label class="checkbox-wrapper">
                                    <input type="checkbox" name="remember-me" />
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-label">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</span>
                                </label>
                            </div>

                            <button type="submit" class="btn-submit">
                                <span>–í–æ–π—Ç–∏</span>
                                <span class="btn-arrow">‚Üí</span>
                            </button>
                        </form>

                        <div class="form-footer">
                            <p class="footer-text">
                                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? 
                                <a th:href="@{/register}" class="footer-link">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function togglePassword(inputId, button) {
                const input = document.getElementById(inputId);
                const isVisible = input.type === 'password';
                input.type = isVisible ? 'text' : 'password';
                button.setAttribute('data-visible', isVisible);
            }
        </script>
    </th:block>
</th:block>
