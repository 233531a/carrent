<th:block th:with="title='–í—Ö–æ–¥', active='login'"
          th:replace="~{_fragments/layout :: layout(${title}, ${active}, ~{::content})}">
    <th:block th:fragment="content">
        <!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –±—ç–∫–¥—Ä–æ–ø -->
        <div class="auth-backdrop has-spotlight" aria-hidden="true">
            <span class="spotlight" id="authLightLogin"></span>
        </div>

        <div class="auth-shell">
            <div class="auth-card">
                <h2 class="page-title auth-title">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>

                <p class="alert alert--warn" th:if="${param.error}">–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å.</p>
                <p class="alert" th:if="${param.logout}">–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞.</p>

                <form th:action="@{/login}" method="post" class="form form--auth">
                    <div class="form__grid">
                        <div class="field">
                            <label for="login_username">–õ–æ–≥–∏–Ω</label>
                            <div class="input-wrap">
                                <input id="login_username" type="text" name="username" autofocus required/>
                            </div>
                        </div>

                        <div class="field field--password">
                            <label for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
                            <div class="input-wrap">
                                <input id="loginPassword" type="password" name="password" required/>
                                <button type="button" class="input-eye" onclick="togglePwd('loginPassword', this)" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
                            </div>
                        </div>
                    </div>

                    <div class="form__actions">
                        <button class="btn" type="submit">–í–æ–π—Ç–∏</button>
                        <a class="btn btn--light" th:href="@{/register}">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</a>
                    </div>
                </form>
            </div>
        </div>

        <script>
            function togglePwd(id, btn){
                const i = document.getElementById(id);
                if(!i) return;
                const t = i.type === 'password' ? 'text' : 'password';
                i.type = t;
                btn.setAttribute('aria-label', t === 'password' ? '–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å' : '–°–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å');
            }
            (function(){
                const el = document.getElementById('authLightLogin');
                if(!el) return;
                let tX = 58, tY = 44, cX = tX, cY = tY, ease = 0.06;
                const loop = () => {
                    cX += (tX - cX)*ease; cY += (tY - cY)*ease;
                    el.style.setProperty('--spot-x', cX + '%');
                    el.style.setProperty('--spot-y', cY + '%');
                    requestAnimationFrame(loop);
                };
                document.addEventListener('mousemove',(e)=>{
                    const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
                    const vh = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
                    tX = (e.clientX / vw) * 100;
                    tY = (e.clientY / vh) * 100;
                });
                loop();
            })();
        </script>
    </th:block>
</th:block>
