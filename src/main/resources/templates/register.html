<th:block th:with="title='–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è', active='register'"
          th:replace="~{_fragments/layout :: layout(${title}, ${active}, ~{::content})}">
    <th:block th:fragment="content">
        <div class="auth-card card">
            <h2 class="page-title">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</h2>

            <p class="alert alert--warn" th:if="${error}" th:text="${error}">–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>

            <form th:action="@{/register}" method="post" class="form form--auth">
                <div class="form__grid">
                    <div>
                        <label>–õ–æ–≥–∏–Ω</label>
                        <input type="text" name="username" placeholder="your.name" minlength="3" maxlength="100" required />
                    </div>
                    <div>
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <div class="input-with-action">
                            <input id="regPassword" type="password" name="password" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" minlength="6" required />
                            <button type="button" class="input-action" onclick="togglePwd('regPassword', this)" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
                        </div>
                    </div>
                </div>

                <div class="form__actions">
                    <button class="btn" type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    <a class="btn btn--light" th:href="@{/login}">–£ –º–µ–Ω—è —É–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç</a>
                </div>
            </form>
        </div>

        <script>
            function togglePwd(id, btn){
                const i = document.getElementById(id);
                if(!i) return;
                const t = i.getAttribute('type') === 'password' ? 'text' : 'password';
                i.setAttribute('type', t);
                btn.setAttribute('aria-label', t === 'password' ? '–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å' : '–°–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å');
            }
        </script>
    </th:block>
</th:block>
